<!DOCTYPE node PUBLIC "-//freedesktop//DTD D-BUS Object Introspection 1.0//EN"
 "http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd">
<node>
  <interface name="com.github.saim.GnomeAssistant">
    <!-- Methods -->
    
    <!-- Mode Control -->
    <method name="SetMode">
      <arg direction="in" name="mode" type="s"/>
      <annotation name="org.freedesktop.DBus.Method.NoReply" value="false"/>
    </method>
    
    <method name="GetMode">
      <arg direction="out" name="mode" type="s"/>
    </method>
    
    <!-- Status -->
    <method name="GetStatus">
      <arg direction="out" name="status" type="a{sv}"/>
      <annotation name="org.freedesktop.DBus.Method.Description" 
                  value="Returns current status including mode, buffer, processing state"/>
    </method>
    
    <!-- Configuration -->
    <method name="GetConfig">
      <arg direction="out" name="config" type="s"/>
      <annotation name="org.freedesktop.DBus.Method.Description" 
                  value="Returns configuration as JSON string"/>
    </method>
    
    <method name="UpdateConfig">
      <arg direction="in" name="config" type="s"/>
      <annotation name="org.freedesktop.DBus.Method.Description" 
                  value="Updates configuration from JSON string"/>
    </method>
    
    <method name="SetConfigValue">
      <arg direction="in" name="key" type="s"/>
      <arg direction="in" name="value" type="v"/>
      <annotation name="org.freedesktop.DBus.Method.Description" 
                  value="Set a single configuration value"/>
    </method>
    
    <!-- Command Management -->
    <method name="GetCommands">
      <arg direction="out" name="commands" type="s"/>
      <annotation name="org.freedesktop.DBus.Method.Description" 
                  value="Returns commands as JSON string"/>
    </method>
    
    <method name="AddCommand">
      <arg direction="in" name="name" type="s"/>
      <arg direction="in" name="command" type="s"/>
      <arg direction="in" name="phrases" type="as"/>
    </method>
    
    <method name="RemoveCommand">
      <arg direction="in" name="name" type="s"/>
    </method>
    
    <!-- Control -->
    <method name="Start">
      <annotation name="org.freedesktop.DBus.Method.Description" 
                  value="Start voice recognition"/>
    </method>
    
    <method name="Stop">
      <annotation name="org.freedesktop.DBus.Method.Description" 
                  value="Stop voice recognition"/>
    </method>
    
    <method name="Restart">
      <annotation name="org.freedesktop.DBus.Method.Description" 
                  value="Restart voice recognition"/>
    </method>
    
    <method name="GetBuffer">
      <arg direction="out" name="buffer" type="s"/>
    </method>
    
    <!-- Signals -->
    
    <signal name="ModeChanged">
      <arg name="new_mode" type="s"/>
      <arg name="old_mode" type="s"/>
    </signal>
    
    <signal name="BufferChanged">
      <arg name="buffer" type="s"/>
    </signal>
    
    <signal name="CommandExecuted">
      <arg name="command" type="s"/>
      <arg name="phrase" type="s"/>
      <arg name="confidence" type="d"/>
    </signal>
    
    <signal name="StatusChanged">
      <arg name="status" type="a{sv}"/>
    </signal>
    
    <signal name="Error">
      <arg name="message" type="s"/>
      <arg name="details" type="s"/>
    </signal>
    
    <signal name="Notification">
      <arg name="title" type="s"/>
      <arg name="message" type="s"/>
      <arg name="urgency" type="s"/>
    </signal>
    
    <signal name="ConfigChanged">
      <arg name="config" type="s"/>
    </signal>
    
    <!-- Properties -->
    <property name="IsRunning" type="b" access="read"/>
    <property name="CurrentMode" type="s" access="read"/>
    <property name="CurrentBuffer" type="s" access="read"/>
    <property name="Version" type="s" access="read"/>
  </interface>
</node>
